"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4337],{58602:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"pct/DatosAdicionales","title":"Consulta de Datos Adicionales al Aceptador","description":"No olvides que puedes ejecutar nuestra API Playground","source":"@site/docs/pct/DatosAdicionales.md","sourceDirName":"pct","slug":"/pct/DatosAdicionales","permalink":"/doc-acq/pct/DatosAdicionales","draft":false,"unlisted":false,"editUrl":"https://github.com/shellhub-io/docs/tree/master/docs/pct/DatosAdicionales.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"API Resolve","permalink":"/doc-acq/pct/apiresolve/"},"next":{"title":"Notificaci\xf3n al Aceptador (Webhook)","permalink":"/doc-acq/pct/webhook"}}');var o=n(74848),r=n(28453);const s={sidebar_position:6},t="Consulta de Datos Adicionales al Aceptador",c={},d=[{value:"\xbfCu\xe1ndo se invoca?",id:"cu\xe1ndo-se-invoca",level:2},{value:"\xbfQu\xe9 datos puede devolver el aceptador?",id:"qu\xe9-datos-puede-devolver-el-aceptador",level:2},{value:"Requisitos t\xe9cnicos",id:"requisitos-t\xe9cnicos",level:2},{value:"Errores comunes",id:"errores-comunes",level:2}];function l(e){const a={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.header,{children:(0,o.jsx)(a.h1,{id:"consulta-de-datos-adicionales-al-aceptador",children:"Consulta de Datos Adicionales al Aceptador"})}),"\n",(0,o.jsx)(a.admonition,{type:"info",children:(0,o.jsxs)(a.p,{children:["No olvides que puedes ejecutar nuestra ",(0,o.jsx)(a.a,{href:"/doc-acq/developers/portalApi/pct_for_acquirers",children:"API Playground"})]})}),"\n",(0,o.jsxs)(a.p,{children:["La consulta de datos adicionales es una API que el administrador invoca hacia el aceptador para obtener informaci\xf3n complementaria sobre una transacci\xf3n iniciada por una billetera. Esta informaci\xf3n ",(0,o.jsx)(a.strong,{children:"no se muestra al usuario"}),", sino que se utiliza para aplicar controles internos que determinan correctamente qu\xe9 se le debe acreditar al comercio."]}),"\n",(0,o.jsx)(a.mermaid,{value:" sequenceDiagram\n    participant Billetera\n    participant Administrador\n    participant Aceptador\n\n    Billetera->>Administrador: Solicita iniciar pago\n    Administrador->>Aceptador: Consulta de datos adicionales\n    Aceptador--\x3e>Administrador: Cuenta de acreditaci\xf3n, retenciones, rubro, tramo\n    Administrador--\x3e>Billetera: Contin\xfaa con la operaci\xf3n (sin mostrar datos fiscales) "}),"\n",(0,o.jsx)(a.h2,{id:"cu\xe1ndo-se-invoca",children:"\xbfCu\xe1ndo se invoca?"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"Luego de que la billetera escanea un QR y se construye la intenci\xf3n de pago."}),"\n",(0,o.jsx)(a.li,{children:"Antes de ejecutar la solicitud de pago, para que el administrador pueda aplicar reglas de acreditaci\xf3n y validaci\xf3n."}),"\n"]}),"\n",(0,o.jsx)(a.h2,{id:"qu\xe9-datos-puede-devolver-el-aceptador",children:"\xbfQu\xe9 datos puede devolver el aceptador?"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"Cuenta de acreditaci\xf3n de comisiones."}),"\n",(0,o.jsx)(a.li,{children:"Retenciones y percepciones aplicables (para el aceptador)."}),"\n",(0,o.jsx)(a.li,{children:"Tramo gratuito o no gratuito."}),"\n",(0,o.jsx)(a.li,{children:"Rubro o categor\xeda del comercio."}),"\n",(0,o.jsx)(a.li,{children:"Tama\xf1o del comercio (micro, pyme, etc.)."}),"\n",(0,o.jsx)(a.li,{children:"C\xf3digos internos para trazabilidad."}),"\n"]}),"\n",(0,o.jsxs)(a.blockquote,{children:["\n",(0,o.jsxs)(a.p,{children:["\u26a0\ufe0f Estos datos ",(0,o.jsx)(a.strong,{children:"no se exponen al usuario final"}),". Son utilizados exclusivamente por el administrador para determinar el neto a acreditar al aceptador y aplicar reglas de negocio."]}),"\n"]}),"\n",(0,o.jsx)(a.h2,{id:"requisitos-t\xe9cnicos",children:"Requisitos t\xe9cnicos"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"El servicio debe estar autenticado v\xeda OAuth 2.0."}),"\n",(0,o.jsx)(a.li,{children:"El aceptador debe exponer un endpoint accesible por el administrador."}),"\n",(0,o.jsx)(a.li,{children:"El tiempo de respuesta debe ser bajo (ej. 4 segundos)."}),"\n"]}),"\n",(0,o.jsx)(a.h2,{id:"errores-comunes",children:"Errores comunes"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.code,{children:"AC_QR_NOT_FOUND"}),": el QR no est\xe1 registrado o expir\xf3."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.code,{children:"respuesta nula"}),": el servicio del aceptador no respondi\xf3 o devolvi\xf3 un body vac\xedo."]}),"\n",(0,o.jsxs)(a.li,{children:["Problemas de autenticaci\xf3n: falta de ",(0,o.jsx)(a.code,{children:"grant_type=client_credentials"})," o token inv\xe1lido."]}),"\n"]})]})}function u(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,o.jsx)(a,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,a,n)=>{n.d(a,{R:()=>s,x:()=>t});var i=n(96540);const o={},r=i.createContext(o);function s(e){const a=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function t(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:a},e.children)}}}]);