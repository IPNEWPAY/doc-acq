"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7042],{4112:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>t,contentTitle:()=>c,default:()=>u,frontMatter:()=>d,metadata:()=>i,toc:()=>s});const i=JSON.parse('{"id":"pct/consultaestado","title":"Consulta de Estado de la Transacci\xf3n","description":"No olvides que puedes ejecutar nuestra API Playground","source":"@site/docs/pct/consultaestado.md","sourceDirName":"pct","slug":"/pct/consultaestado","permalink":"/doc-acq/pct/consultaestado","draft":false,"unlisted":false,"editUrl":"https://github.com/shellhub-io/docs/tree/master/docs/pct/consultaestado.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"docsSidebar","previous":{"title":"Notificaci\xf3n al Aceptador (Webhook)","permalink":"/doc-acq/pct/webhook"},"next":{"title":"Devoluci\xf3n (DCT)","permalink":"/doc-acq/pct/devolucion"}}');var o=n(74848),r=n(28453);const d={sidebar_position:8},c="Consulta de Estado de la Transacci\xf3n",t={},s=[{value:"\xbfCu\xe1ndo se utiliza?",id:"cu\xe1ndo-se-utiliza",level:2},{value:"\xbfQu\xe9 par\xe1metros se utilizan?",id:"qu\xe9-par\xe1metros-se-utilizan",level:2},{value:"\xbfQu\xe9 devuelve?",id:"qu\xe9-devuelve",level:2},{value:"Buenas pr\xe1cticas",id:"buenas-pr\xe1cticas",level:2}];function l(e){const a={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.header,{children:(0,o.jsx)(a.h1,{id:"consulta-de-estado-de-la-transacci\xf3n",children:"Consulta de Estado de la Transacci\xf3n"})}),"\n",(0,o.jsx)(a.admonition,{type:"info",children:(0,o.jsxs)(a.p,{children:["No olvides que puedes ejecutar nuestra ",(0,o.jsx)(a.a,{href:"/doc-acq/developers/portalApi/pct_for_acquirers",children:"API Playground"})]})}),"\n",(0,o.jsx)(a.p,{children:"La consulta de estado es una API que el aceptador puede invocar hacia el administrador para conocer el resultado de una transacci\xf3n iniciada por una billetera. Este mecanismo act\xfaa como respaldo en caso de que el webhook de notificaci\xf3n no llegue o falle"}),"\n",(0,o.jsx)(a.mermaid,{value:" sequenceDiagram\r\n    participant Billetera\r\n    participant Administrador\r\n    participant Aceptador\r\n\r\n    Billetera->>Administrador: Solicita pago\r\n    Administrador->>Administrador: Procesa transacci\xf3n\r\n    Administrador->>Aceptador: (Webhook) Resultado de la transacci\xf3n\r\n    Note right of Aceptador: \u274c Webhook no recibido\r\n\r\n    Aceptador->>Administrador: Consulta de estado (qr_id)\r\n    Administrador--\x3e>Aceptador: Estado actual de la transacci\xf3n "}),"\n",(0,o.jsx)(a.h2,{id:"cu\xe1ndo-se-utiliza",children:"\xbfCu\xe1ndo se utiliza?"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"Cuando el aceptador no recibe el webhook de resultado de la transacci\xf3n."}),"\n",(0,o.jsx)(a.li,{children:"Cuando el aceptador necesita reconfirmar el estado de una operaci\xf3n (por ejemplo, por timeout o error de red)."}),"\n",(0,o.jsx)(a.li,{children:"En procesos de conciliaci\xf3n o auditor\xeda."}),"\n"]}),"\n",(0,o.jsx)(a.h2,{id:"qu\xe9-par\xe1metros-se-utilizan",children:"\xbfQu\xe9 par\xe1metros se utilizan?"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.code,{children:"qr_id"}),": identificador \xfanico del QR escaneado."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.code,{children:"external_id"}),": ID de la transacci\xf3n generado por el aceptador (opcional)."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.code,{children:"fecha"}),": para acotar la b\xfasqueda si se desconoce el ID exacto."]}),"\n"]}),"\n",(0,o.jsx)(a.h2,{id:"qu\xe9-devuelve",children:"\xbfQu\xe9 devuelve?"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:["Estado de la transacci\xf3n: ",(0,o.jsx)(a.code,{children:"aprobada"}),", ",(0,o.jsx)(a.code,{children:"rechazada"}),", ",(0,o.jsx)(a.code,{children:"pendiente"}),", ",(0,o.jsx)(a.code,{children:"expirada"}),"."]}),"\n",(0,o.jsx)(a.li,{children:"Monto, moneda."}),"\n",(0,o.jsx)(a.li,{children:"CVU del pagador y receptor."}),"\n",(0,o.jsx)(a.li,{children:"Timestamp de ejecuci\xf3n."}),"\n",(0,o.jsx)(a.li,{children:"Motivo de rechazo (si aplica)."}),"\n"]}),"\n",(0,o.jsx)(a.h2,{id:"buenas-pr\xe1cticas",children:"Buenas pr\xe1cticas"}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsx)(a.li,{children:"Implementar l\xf3gica de reintento con backoff exponencial."}),"\n",(0,o.jsx)(a.li,{children:"Registrar todas las consultas para trazabilidad."}),"\n",(0,o.jsx)(a.li,{children:"No abusar del endpoint: usar solo cuando el webhook no llega o hay dudas razonables."}),"\n"]})]})}function u(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,o.jsx)(a,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,a,n)=>{n.d(a,{R:()=>d,x:()=>c});var i=n(96540);const o={},r=i.createContext(o);function d(e){const a=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function c(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),i.createElement(r.Provider,{value:a},e.children)}}}]);