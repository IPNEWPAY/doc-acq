"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3820],{45038:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>s});const i=JSON.parse('{"id":"pct/webhook","title":"Notificaci\xf3n al Aceptador (Webhook)","description":"No olvides que puedes ejecutar nuestra API Playground","source":"@site/docs/pct/webhook.md","sourceDirName":"pct","slug":"/pct/webhook","permalink":"/doc-acq/pct/webhook","draft":false,"unlisted":false,"editUrl":"https://github.com/shellhub-io/docs/tree/master/docs/pct/webhook.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"docsSidebar","previous":{"title":"Consulta de Datos Adicionales al Aceptador","permalink":"/doc-acq/pct/DatosAdicionales"},"next":{"title":"Consulta de Estado de la Transacci\xf3n","permalink":"/doc-acq/pct/consultaestado"}}');var r=n(74848),o=n(28453);const t={sidebar_position:7},c="Notificaci\xf3n al Aceptador (Webhook)",l={},s=[{value:"\xbfCu\xe1ndo se dispara?",id:"cu\xe1ndo-se-dispara",level:2},{value:"\xbfQu\xe9 contiene la notificaci\xf3n?",id:"qu\xe9-contiene-la-notificaci\xf3n",level:2},{value:"\xbfQu\xe9 debe hacer el aceptador?",id:"qu\xe9-debe-hacer-el-aceptador",level:2},{value:"\xbfQu\xe9 pasa si no llega?",id:"qu\xe9-pasa-si-no-llega",level:2},{value:"Buenas pr\xe1cticas",id:"buenas-pr\xe1cticas",level:2}];function d(e){const a={a:"a",admonition:"admonition",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"notificaci\xf3n-al-aceptador-webhook",children:"Notificaci\xf3n al Aceptador (Webhook)"})}),"\n",(0,r.jsx)(a.admonition,{type:"info",children:(0,r.jsxs)(a.p,{children:["No olvides que puedes ejecutar nuestra ",(0,r.jsx)(a.a,{href:"/doc-acq/developers/portalApi/pct_for_newpay",children:"API Playground"})]})}),"\n",(0,r.jsx)(a.p,{children:"Una vez que el administrador procesa una transacci\xf3n PCT, se emite una notificaci\xf3n al aceptador mediante un webhook. Esta notificaci\xf3n permite al aceptador registrar el resultado de la operaci\xf3n y continuar con su l\xf3gica de negocio (por ejemplo, liberar un producto, emitir un ticket, etc.)."}),"\n",(0,r.jsx)(a.mermaid,{value:"  sequenceDiagram\r\n    participant Billetera\r\n    participant Administrador\r\n    participant BancoPagador\r\n    participant Aceptador\r\n\r\n    Billetera->>Administrador: Solicita pago\r\n    Administrador->>BancoPagador: Ejecuta transferencia\r\n    BancoPagador--\x3e>Administrador: Respuesta (OK / Error)\r\n    Administrador->>Aceptador: Webhook con resultado\r\n    Aceptador--\x3e>Administrador: HTTP 200 OK\r\n    Administrador--\x3e>Billetera: Notifica resultado  "}),"\n",(0,r.jsx)(a.h2,{id:"cu\xe1ndo-se-dispara",children:"\xbfCu\xe1ndo se dispara?"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Luego de que el administrador recibe la respuesta del banco del pagador (aprobada o rechazada)."}),"\n",(0,r.jsx)(a.li,{children:"Antes o en paralelo a la notificaci\xf3n a la billetera."}),"\n"]}),"\n",(0,r.jsx)(a.h2,{id:"qu\xe9-contiene-la-notificaci\xf3n",children:"\xbfQu\xe9 contiene la notificaci\xf3n?"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Estado de la transacci\xf3n (aprobada, rechazada)."}),"\n",(0,r.jsx)(a.li,{children:"Monto y moneda."}),"\n",(0,r.jsx)(a.li,{children:"CVU del pagador."}),"\n",(0,r.jsx)(a.li,{children:"CVU del receptor."}),"\n",(0,r.jsx)(a.li,{children:"ID de la transacci\xf3n (correlacionado con el QR)."}),"\n",(0,r.jsx)(a.li,{children:"Timestamp de ejecuci\xf3n."}),"\n",(0,r.jsx)(a.li,{children:"Motivo de rechazo (si aplica)."}),"\n"]}),"\n",(0,r.jsx)(a.h2,{id:"qu\xe9-debe-hacer-el-aceptador",children:"\xbfQu\xe9 debe hacer el aceptador?"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Confirmar recepci\xf3n con un HTTP 200 OK."}),"\n",(0,r.jsx)(a.li,{children:"Procesar la informaci\xf3n y actualizar su sistema."}),"\n",(0,r.jsx)(a.li,{children:"Registrar el resultado para conciliaci\xf3n."}),"\n"]}),"\n",(0,r.jsx)(a.h2,{id:"qu\xe9-pasa-si-no-llega",children:"\xbfQu\xe9 pasa si no llega?"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"El administrador puede reintentar la notificaci\xf3n (seg\xfan pol\xedtica)."}),"\n",(0,r.jsx)(a.li,{children:"El aceptador puede consultar el estado de la transacci\xf3n v\xeda API."}),"\n",(0,r.jsx)(a.li,{children:"Se recomienda implementar l\xf3gica de reintento y alertas ante fallos."}),"\n"]}),"\n",(0,r.jsx)(a.h2,{id:"buenas-pr\xe1cticas",children:"Buenas pr\xe1cticas"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"El endpoint debe estar siempre disponible y tolerante a fallos."}),"\n",(0,r.jsx)(a.li,{children:"Registrar todos los eventos recibidos para trazabilidad."}),"\n",(0,r.jsx)(a.li,{children:"Validar firma o token si se usa autenticaci\xf3n."}),"\n"]})]})}function p(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,a,n)=>{n.d(a,{R:()=>t,x:()=>c});var i=n(96540);const r={},o=i.createContext(r);function t(e){const a=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function c(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:a},e.children)}}}]);